# Docker Compose configuration for Trading Dashboard and Ollama
# This file is optional - you can also manually configure Docker networking

version: '3.8'

services:
  trading-dashboard:
    build:
      context: ..
      dockerfile: web_dashboard/Dockerfile
    container_name: trading-dashboard
    ports:
      - "8501:8501"
    environment:
      - SUPABASE_URL=${SUPABASE_URL}
      - SUPABASE_PUBLISHABLE_KEY=${SUPABASE_PUBLISHABLE_KEY}
      - SUPABASE_SECRET_KEY=${SUPABASE_SECRET_KEY}
      - OLLAMA_BASE_URL=http://ollama:11434
      - OLLAMA_ENABLED=${OLLAMA_ENABLED:-true}
    networks:
      - trading-network
    restart: unless-stopped
    depends_on:
      - ollama

  ollama:
    image: ollama/ollama:0.5.4 # Pinned for stability; update after testing new versions
    container_name: ollama
    ports:
      - "11434:11434"
    volumes:
      - ollama-data:/root/.ollama
    networks:
      - trading-network
    restart: unless-stopped

networks:
  trading-network:
    driver: bridge

volumes:
  ollama-data:


