# Caddyfile for Streamlit reverse proxy
# Replace ai-trading.hobo.cash with your actual domain

ai-trading.hobo.cash {
    # Serve auth callback HTML (handles magic links & password resets)
    handle /auth_callback.html {
        root * /ai-trading/frontend
        file_server
    }
    
    # Serve set_cookie.html (sets auth cookie and redirects back)
    handle /set_cookie.html {
        root * /ai-trading/frontend
        file_server
    }
    
    # Reverse proxy everything else to Streamlit
    reverse_proxy localhost:8501 {
        # WebSocket support for Streamlit
        transport http {
            versions 1.1 2
        }
    }
    
    # Health check endpoint
    handle /health {
        reverse_proxy localhost:8501
    }
}

# For local development (uncomment if needed)
# localhost:8080 {
#     reverse_proxy localhost:8501 {
#         transport http {
#             versions 1.1 2
#         }
#     }
# }


